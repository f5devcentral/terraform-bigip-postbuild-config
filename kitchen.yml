---
driver:
  name: terraform
  root_module_directory: test/fixtures/aws
  parallelism: 4
  command_timeout: 1200

provisioner:
  name: terraform

verifier:
  name: terraform

platforms:
  - name: aws
    
    driver:
      root_module_directory: test/fixtures/aws
      variable_files:
        - test/assets/aws.tfvars
    verifier:
      systems:
        - name: local
          backend: local
          controls:
            - bigip-postbuildconfig-do-self
            - bigip-postbuildconfig-do-dns
            - bigip-postbuildconfig-do-vlan
            - bigip-postbuildconfig-do-provision

  - name: azure
    lifecycle:
      post_converge:
        - local: echo 'waiting 200 seconds for Azure to stabilize' && sleep 200
    driver:
      root_module_directory: test/fixtures/azure
      variable_files:
        - test/assets/azure.tfvars
    verifier:
      systems:
        - name: local
          backend: local
          controls:
            - bigip-postbuildconfig-do-self
            - bigip-postbuildconfig-do-dns
            - bigip-postbuildconfig-do-vlan
            - bigip-postbuildconfig-do-provision

suites:
  - name: bigip